<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<title>拍照或从手机相册中选图接口</title>
<link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
<link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
<style>
 ul li{list-style-type:none; }
.imglist{margin:0 auto;padding:0;}
.imglist .imgu{margin:0;padding:0;border:1px solid #ddd;}
.imglist .imgu .imgli{border:1px solid red;margin:10px 0;border-radius:10px;}
.pad10{padding:10px;}
</style>
</head>
<body>
	<div class="weui-cells weui-cells_form">
	  <div class="weui-cell">
	    <div class="weui-cell__bd">
	      <div class="weui-uploader">
	        <div class="weui-uploader__hd">
	          <p class="weui-uploader__title">图片上传</p>
	          <div class="weui-uploader__info">0/9</div>
	        </div>
	        <div class="weui-uploader__bd">
	          <ul class="weui-uploader__files" id="uploaderFiles">
	            <li class="weui-uploader__file" style="background-image:url(./img/true.jpg)"></li>	           	            
	          </ul>
	          <div class="weui-uploader__input-box">
	            <!-- <input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*" multiple="multiple"> -->
	            <input id="uploaderInput" class="weui-uploader__input" type="button"  onclick="chooseImage()"/>
	          </div>
	        </div>
	      </div>
	    </div>
	  </div>
	  <div class="pad10">
	  <a href="javascript:;" class="weui-btn weui-btn_primary">图片上传Upload</a>
	  <a href="javascript:;" class="weui-btn weui-btn_primary" onclick="getNetworkType()">抓取网络状态Api</a>
	  <a href="javascript:;" class="weui-btn weui-btn_primary" onclick="scanQRCode()">微信扫一扫Api</a>
	  <a href="javascript:;" class="weui-btn weui-btn_primary" onclick="getLocation()">获取地理位置Api</a>
	  <a href="javascript:;" class="weui-btn weui-btn_default" onclick="clearAll()">清除All</a>	  
	  </div>
	</div>				
	<script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/swiper.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/city-picker.min.js"></script>
	<script src="https://res2.wx.qq.com/open/js/jweixin-1.4.0.js"></script> 	
	<script src="./wx.php"></script>
	<script>
		wx.ready(function() {
			//判断当前客户端版本是否支持指定JS接口
			wx.checkJsApi({
				jsApiList : [ 'checkJsApi', 'showMenuItems', 'hideMenuItems',
						'onMenuShareTimeline', 'onMenuShareAppMessage',
						'updateAppMessageShareData','updateTimelineShareData',
						'chooseImage', 'onMenuShareQQ','onMenuShareQZone','onMenuShareWeibo','scanQRCode','getLocation' ], // 需要检测的JS接口列表，所有JS接口列表见附录2,
				success : function(res) {
					//alert(JSON.stringify(res));
				}
			});
			//自定义“分享给朋友”及“分享到QQ”按钮的分享内容（1.4.0）
			 wx.onMenuShareAppMessage({ 
		        title: '校园一角', // 分享标题
		        desc: '校园一角：日常生活纪录片，点滴回忆、由这里开始。', // 分享描述
		        link: "http://xyz.4001116178.com/audio/1.mp3", // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
		        imgUrl: 'http://video.qpic.cn/video_caps_enc/Q3auHgzwzM7Dz1edVhHpx8ibicQibJPTfLMUiamnEGcdhfS3xeBibGtCqum16wibrAFlYmptOQkAbqlyI/0', // 分享图标
		        type:'music',//分享类型,music、video或link，不填默认为link
		        dataUrl: "http://xyz.4001116178.com/audio/1.mp3",  // 如果type是music或video，则要提供数据链接，默认为空
				success: function(res) { 
				    //这里是回调函数 
					alert('friend:'+JSON.stringify(res));	
				}
			 }); 			
			//自定义“分享到朋友圈”及“分享到QQ空间”按钮的分享内容（1.4.0）
			 wx.onMenuShareTimeline({ 
			        title: '好想好想--古巨基', // 分享标题
			        desc: '校园一角：日常生活纪录片，点滴回忆、由这里开始。', // 分享描述
			        link: 'http://xyz.4001116178.com/audio/6aa690c822271382d552e72cb3985134.mp4', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
			        imgUrl: 'https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=4267478866,692454250&fm=58&bpow=1066&bpoh=1600', // 分享图标
			        type:'video',//分享类型,music、video或link，不填默认为link
			        dataUrl: "http://xyz.4001116178.com/audio/6aa690c822271382d552e72cb3985134.mp4",  // 如果type是music或video，则要提供数据链接，默认为空			      
			       success: function(res) { 
						//这里是回调函数 
						alert('timeline:'+JSON.stringify(res));
			       }
		       });
			 //获取“分享到QQ”按钮点击状态及自定义分享内容接口
			 wx.onMenuShareQQ({
					 title: '校园一角', // 分享标题
					 desc: '校园一角：日常生活纪录片，点滴回忆、由这里开始。', // 分享描述
					 link: 'http://xyz.4001116178.com/audio/6aa690c822271382d552e72cb3985134.mp4', // 分享链接
					 imgUrl: 'http://video.qpic.cn/video_caps_enc/Q3auHgzwzM7Dz1edVhHpx8ibicQibJPTfLMUiamnEGcdhfS3xeBibGtCqum16wibrAFlYmptOQkAbqlyI/0', // 分享图标
					 success: function (res) {
					 // 用户确认分享后执行的回调函数
						 alert('qq好友:'+JSON.stringify(res));
					 },
					 cancel: function () {
					 // 用户取消分享后执行的回调函数
					 }
				 });
			 //获取“分享到QQ空间”按钮点击状态及自定义分享内容接口
			 wx.onMenuShareQZone({
					 title: '校园一角', // 分享标题
					 desc: '校园一角：日常生活纪录片，点滴回忆、由这里开始。', // 分享描述
					 link: 'http://xyz.4001116178.com/audio/6aa690c822271382d552e72cb3985134.mp4', // 分享链接
					 imgUrl: 'http://video.qpic.cn/video_caps_enc/Q3auHgzwzM7Dz1edVhHpx8ibicQibJPTfLMUiamnEGcdhfS3xeBibGtCqum16wibrAFlYmptOQkAbqlyI/0', // 分享图标
					 success: function (res) {
					 // 用户确认分享后执行的回调函数
						 alert('qq空间:'+JSON.stringify(res));
					 },
					 cancel: function () {
					 // 用户取消分享后执行的回调函数
					 }
				});
			 //获取“分享到腾讯微博”按钮点击状态及自定义分享内容接口
			 wx.onMenuShareWeibo({
					 title: '校园一角', // 分享标题
					 desc: '校园一角：日常生活纪录片，点滴回忆、由这里开始。', // 分享描述
					 link: 'http://xyz.4001116178.com/audio/6aa690c822271382d552e72cb3985134.mp4', // 分享链接
					 imgUrl: 'http://video.qpic.cn/video_caps_enc/Q3auHgzwzM7Dz1edVhHpx8ibicQibJPTfLMUiamnEGcdhfS3xeBibGtCqum16wibrAFlYmptOQkAbqlyI/0', // 分享图标
					 success: function (res) {
					 // 用户确认分享后执行的回调函数
						 alert('腾讯微博:'+JSON.stringify(res));
					 },
					 cancel: function () {
					 // 用户取消分享后执行的回调函数
					 }
				 });
		});		
		wx.error(function(res){			 
		    // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
			alert("微信验证失败"+JSON.stringify(res));
		});
		//拍照或从手机相册中选图接口
		function chooseImage() {						
			wx.chooseImage({
				count : 9, // 默认9
				sizeType : [ 'original', 'compressed' ], // 可以指定是原图还是压缩图，默认二者都有
				sourceType : [ 'album', 'camera' ], // 可以指定来源是相册还是相机，默认二者都有
				success : function(res) {
					var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片	
					  var sigli ='<li class="weui-uploader__file" style="background-image:url('+localIds+')"></li>';	
					$('#uploaderFiles').append(sigli);
				}
			});
		}
		//清除
		function clearAll(){
			$('#uploaderFiles').empty();
		}	
		//获取网络状态接口
		function getNetworkType(){
			wx.getNetworkType({
				success: function (res) {
				var networkType = res.networkType; // 返回网络类型2g，3g，4g，wifi
				alert(JSON.stringify(networkType));
				}
			});
		}
		//调起微信扫一扫接口
       function scanQRCode(){
    	   wx.scanQRCode({
	   		   needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
	   		   scanType: ["qrCode","barCode"], // 可以指定扫二维码还是一维码，默认二者都有
	   		   success: function (res) {
	   		   	var result = res.resultStr; // 当needResult 为 1 时，扫码返回的结果
	   		 	alert(JSON.stringify(result));
	   		   }
   		   });
		} 	
		//获取地理位置接口
		function getLocation(){
			wx.getLocation({
				type: 'wgs84', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'
				success: function (res) {
				var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90
				var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。
				var speed = res.speed; // 速度，以米/每秒计
				var accuracy = res.accuracy; // 位置精度
					alert('纬度:'+latitude+',经度:'+longitude+',速度:'+speed+',位置精度:'+accuracy);
				}
			});
		}
		
	</script>
</body>
</html>