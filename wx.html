<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<title>拍照或从手机相册中选图接口</title>
<link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
<link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
<style>
 ul li{list-style-type:none; }
.imglist{margin:0 auto;padding:0;}
.imglist .imgu{margin:0;padding:0;border:1px solid #ddd;}
.imglist .imgu .imgli{border:1px solid red;margin:10px 0;border-radius:10px;}
.pad10{padding:10px;}
</style>
</head>
<body>
	<div class="weui-cells weui-cells_form">
	  <div class="weui-cell">
	    <div class="weui-cell__bd">
	      <div class="weui-uploader">
	        <div class="weui-uploader__hd">
	          <p class="weui-uploader__title">图片上传</p>
	          <div class="weui-uploader__info">0/9</div>
	        </div>
	        <div class="weui-uploader__bd">
	          <ul class="weui-uploader__files" id="uploaderFiles">
	            <li class="weui-uploader__file" style="background-image:url(./img/true.jpg)"></li>	           	            
	          </ul>
	          <div class="weui-uploader__input-box">
	            <!-- <input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*" multiple="multiple"> -->
	            <input id="uploaderInput" class="weui-uploader__input" type="button"  onclick="chooseImage()"/>
	          </div>
	        </div>
	      </div>
	    </div>
	  </div>
	  <div class="pad10">
	  <a href="javascript:;" class="weui-btn weui-btn_primary">提交</a>
	  <a href="javascript:;" class="weui-btn weui-btn_default" onclick="clearAll()">清除</a>
	  </div>
	</div>				
	<script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/swiper.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/city-picker.min.js"></script>
	<script src="http://res2.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
	<script src="./wx.php"></script>
	<script>
		wx.ready(function() {
			//判断当前客户端版本是否支持指定JS接口
			wx.checkJsApi({
				jsApiList : [ 'checkJsApi', 'showMenuItems', 'hideMenuItems',
						'onMenuShareTimeline', 'onMenuShareAppMessage','chooseImage' ], // 需要检测的JS接口列表，所有JS接口列表见附录2,
				success : function(res) {
					//alert(JSON.stringify(res));
				}
			});
		});
		//拍照或从手机相册中选图接口
		function chooseImage() {						
			wx.chooseImage({
				count : 9, // 默认9
				sizeType : [ 'original', 'compressed' ], // 可以指定是原图还是压缩图，默认二者都有
				sourceType : [ 'album', 'camera' ], // 可以指定来源是相册还是相机，默认二者都有
				success : function(res) {
					var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片	
					  var sigli ='<li class="weui-uploader__file" style="background-image:url('+localIds+')"></li>';	
					$('#uploaderFiles').append(sigli);
				}
			});
		}
		//清除
		function clearAll(){
			$('#uploaderFiles').empty();
		}		
	</script>
</body>
</html>